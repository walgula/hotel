# Hotel Room Occupancy Optimization API

This project is a room occupancy optimization tool for hotels, which helps determine the optimal allocation of Premium and Economy rooms based on the willingness of potential guests to pay for the night.

## Prerequisites

- Java 21
- Maven (you can use the Maven Wrapper included in the project)
- Git

## Project Structure
 ```
hotel/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── com/
│   │   │       └── walgula/
│   │   │           └── hotel/
│   │   │               ├── config/
│   │   │               │   └── OpenApiConfig.java
│   │   │               ├── controller/
│   │   │               │   └── RoomsController.java
│   │   │               ├── dto/
│   │   │               │   └── RoomsRequest.java
│   │   │               ├── exception/
│   │   │               │   ├── GlobalExceptionHandler.java
│   │   │               │   └── InvalidInputDataException.java
│   │   │               ├── model/
│   │   │               │   └── RoomsOptimizationResponse.java
│   │   │               ├── service/
│   │   │               │   └── RoomsOptimizationService.java
│   │   │               └── HotelApplication.java
│   │   └── resources/
│   │       └── application.properties
│   └── test/
│       └── java/
│           └── com/
│               └── walgula/
│                   └── hotel/
│                       ├── controller/
│                       │   └── RoomsControllerTest.java
│                       ├── service/
│                       │   └── RoomsOptimizationServiceTest.java
│                       └── HotelApplicationTest.java
├── .mvn/
│   └── wrapper/
│       ├── maven-wrapper.jar
│       └── maven-wrapper.properties
├── mvnw
├── mvnw.cmd
├── pom.xml
└── README.md
 ```
## How to Run the Application

### Using Maven Wrapper

1. **Clone the Repository**

    ```bash
    git clone https://github.com/walgula/hotel.git
    cd hotel
    ```

2. **Build the Application**

   On Linux/Mac:
    ```bash
    ./mvnw clean install
    ```

   On Windows:
    ```bash
    mvnw.cmd clean install
    ```

3. **Run the Application**

   On Linux/Mac:
    ```bash
    ./mvnw spring-boot:run
    ```

   On Windows:
    ```bash
    mvnw.cmd spring-boot:run
    ```

4. **API Documentation**

   Once the application is running, you can access the API documentation generated by Swagger at:
    ```
    http://localhost:8080/swagger-ui.html or http://localhost:8080, it also will redirect you to swagger
    ```

## API Endpoints

### Endpoint: `/api/v1/rooms`

#### Method: `POST`

#### Description:
Allocates rooms based on the number of available Premium and Economy rooms and the willingness of potential guests to pay.

#### An example of request body:
```json
{
    "availablePremiumRooms": 3,
    "availableEconomyRooms": 3,
    "guestsPayments": [23, 45, 155, 374, 22, 99.99, 100, 101, 115, 209]
}
```
#### An example of response body:
```json
{
    "premiumRoomsOccupation": 3,
    "premiumRoomsTotalRevenue": 738.0,
    "economyRoomsOccupation": 3,
    "economyRoomsTotalRevenue": 167.99
}
```
## Exception Handling
The application includes a global exception handler to manage invalid inputs, such as negative room counts or willingness to pay values.

## Dependencies
The pom.xml file includes all necessary dependencies, including Spring Boot, Lombok and Swagger.

## Contact
For any questions or issues, please contact [waldek.gula@gmail.com].

## Found inconsistency in task's test data
For given input mock data with payments: [23, 45, 155, 374, 22, 99.99, 100, 101, 115, 209] it is impossible to obtain
results as below:
### Test 4
- (input) Free Premium rooms: 7
- (input) Free Economy rooms: 1
- (output) Usage Premium: 7 (EUR 1153)
- (output) Usage Economy: 1 (EUR 45.99)